# Варианты анимаций атаки для 2D карточек

Этот документ содержит предложения различных вариантов анимаций атаки для карточек юнитов.

## Реализованная анимация

### 1. Параллелограмм (CardAttackShader)
**Описание:** Карточка деформируется в параллелограмм - верхняя грань резко сдвигается вправо, застывает на мгновение и возвращается обратно.

**Характеристики:**
- Резкое движение верхней грани вправо
- Застывание в наклоненном положении
- Плавный возврат в исходное положение

**Применение:** Универсальная анимация для ближних атак.

---

## Предложения других вариантов анимаций

### 2. Резкий наклон вперед (Forward Tilt)
**Описание:** Карточка резко наклоняется вперед (к цели), создавая эффект "броска" карточки.

**Реализация:**
- Использовать Transform rotation для наклона по оси X
- Добавить небольшое смещение вперед по оси Z
- Анимация: быстрое наклонение → застывание → возврат

**Код концепт:**
```csharp
// В корутине анимации
transform.RotateAround(pivotPoint, Vector3.right, tiltAngle);
transform.position += transform.forward * forwardOffset;
```

**Применение:** Ближние атаки, особенно для "бросковых" навыков.

---

### 3. Вращение вокруг оси (Spin Attack)
**Описание:** Карточка быстро вращается вокруг своей вертикальной оси (Y), создавая эффект "замаха".

**Реализация:**
- Вращение вокруг локальной оси Y
- Можно комбинировать с небольшим смещением вперед
- Анимация: быстрое вращение (180-360°) → возврат

**Код концепт:**
```csharp
transform.Rotate(0, rotationSpeed * Time.deltaTime, 0);
```

**Применение:** Мощные атаки, "круговые" удары.

---

### 4. Масштабирование с пульсацией (Scale Pulse)
**Описание:** Карточка быстро увеличивается, затем пульсирует и возвращается к нормальному размеру.

**Реализация:**
- Изменение localScale
- Можно добавить эффект "вспышки" через изменение цвета/яркости
- Анимация: масштаб 1.0 → 1.2 → 1.1 → 1.0

**Код концепт:**
```csharp
transform.localScale = Vector3.one * scaleValue;
spriteRenderer.color = Color.Lerp(Color.white, Color.yellow, pulseIntensity);
```

**Применение:** Магические атаки, "заряженные" удары.

---

### 5. Смещение с отскоком (Bounce Attack)
**Описание:** Карточка резко смещается в сторону цели, затем слегка отскакивает назад и возвращается на место.

**Реализация:**
- Смещение позиции в направлении цели
- Использование кривой анимации с "отскоком" (bounce)
- Анимация: смещение вперед → отскок назад → возврат

**Код концепт:**
```csharp
Vector3 targetOffset = directionToTarget * maxOffset;
transform.position = Vector3.Lerp(originalPosition, originalPosition + targetOffset, curveValue);
```

**Применение:** Динамичные атаки, особенно для быстрых юнитов.

---

### 6. Деформация "волной" (Wave Deform)
**Описание:** Карточка деформируется волной, которая проходит от низа к верху, создавая эффект "ударной волны".

**Реализация:**
- Шейдер с деформацией на основе синусоидальной волны
- Волна проходит по карточке снизу вверх
- Можно комбинировать с изменением цвета

**Шейдер концепт:**
```hlsl
float wave = sin((uv.y - _WaveProgress) * 3.14159) * _WaveAmplitude;
vertex.x += wave;
```

**Применение:** Магические атаки, "энергетические" удары.

---

### 7. Разделение на части (Split Attack)
**Описание:** Карточка визуально "разделяется" на части (верхняя и нижняя половины расходятся), затем возвращаются вместе.

**Реализация:**
- Дублирование спрайта или использование нескольких SpriteRenderer
- Разделение по горизонтали с раздвижением частей
- Анимация: разделение → застывание → слияние

**Код концепт:**
```csharp
// Создать два SpriteRenderer для верхней и нижней половин
topHalf.transform.position += Vector3.up * separation;
bottomHalf.transform.position += Vector3.down * separation;
```

**Применение:** Специальные атаки, "разрушительные" навыки.

---

### 8. Тряска/вибрация (Shake Attack)
**Описание:** Карточка быстро трясется/вибрирует перед атакой, создавая эффект накопления энергии.

**Реализация:**
- Случайные небольшие смещения позиции
- Можно комбинировать с изменением масштаба
- Анимация: тряска → резкий выброс вперед → возврат

**Код концепт:**
```csharp
Vector3 shakeOffset = Random.insideUnitCircle * shakeIntensity;
transform.position = originalPosition + shakeOffset;
```

**Применение:** Заряжаемые атаки, "мощные" навыки.

---

### 9. Исчезновение и появление (Teleport Attack)
**Описание:** Карточка исчезает (fade out), появляется ближе к цели, атакует, и возвращается на место.

**Реализация:**
- Изменение alpha через MaterialPropertyBlock или Color
- Телепортация позиции
- Анимация: fade out → телепорт → fade in → атака → возврат

**Код концепт:**
```csharp
spriteRenderer.color = new Color(1, 1, 1, alphaValue);
transform.position = Vector3.Lerp(originalPosition, attackPosition, t);
```

**Применение:** Быстрые атаки, "телепортирующие" навыки.

---

### 10. Комбинированная анимация (Hybrid Attack)
**Описание:** Комбинация нескольких эффектов - например, наклон + масштабирование + изменение цвета.

**Реализация:**
- Объединение нескольких техник анимации
- Можно использовать разные эффекты для разных типов атак
- Настраиваемые параметры для каждого эффекта

**Применение:** Универсальная система для различных типов навыков.

---

## Рекомендации по выбору

1. **Ближние атаки (Melee):**
   - Параллелограмм (реализовано)
   - Резкий наклон вперед
   - Смещение с отскоком

2. **Дальние атаки (Ranged):**
   - Масштабирование с пульсацией
   - Разделение на части
   - Исчезновение и появление

3. **Магические атаки (Magic):**
   - Деформация "волной"
   - Масштабирование с пульсацией
   - Тряска/вибрация

4. **Мощные атаки (Heavy):**
   - Вращение вокруг оси
   - Тряска/вибрация
   - Комбинированная анимация

---

## Технические заметки

- Все анимации должны быть оптимизированы для производительности
- Использовать MaterialPropertyBlock вместо создания новых материалов где возможно
- Анимации должны быть настраиваемыми через параметры в инспекторе
- Учитывать направление атаки (к цели) при применении анимаций
- Анимации должны корректно работать с системой поворота карточек к камере

---

## Приоритет реализации

1. ✅ Параллелограмм (реализовано)
2. Резкий наклон вперед (легко реализовать)
3. Масштабирование с пульсацией (легко реализовать)
4. Смещение с отскоком (средняя сложность)
5. Вращение вокруг оси (средняя сложность)
6. Остальные варианты (требуют более сложной реализации)

